<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baiyang.oms.modular.business.dao.TempSoDownloadMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.baiyang.oms.modular.business.model.TempSoDownload">
        <id column="id" property="id"/>
        <result column="file_name" property="fileName"/>
        <result column="file_path" property="filePath"/>
        <result column="created_by" property="createdBy"/>
        <result column="create_time" property="createTime"/>
        <result column="updated_by" property="updatedBy"/>
        <result column="update_time" property="updateTime"/>
        <result column="status" property="status"/>
        <result column="file_code" property="fileCode"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, file_name AS fileName, file_path AS filePath, created_by AS createdBy, create_time AS createTime, updated_by AS updatedBy, update_time AS updateTime, status, file_code AS fileCode
    </sql>
    <select id="selectBySearchCondition" parameterType="com.baomidou.mybatisplus.plugins.Page" resultType="map">
        SELECT
        <include refid="Base_Column_List"/>
        FROM temp_so_download_task
        WHERE 1=1
        <if test="fileCode != null and fileCode != ''">
            AND file_code like CONCAT('%',#{fileCode},'%')
        </if>
        <if test="keyword != null and keyword != ''">
            and (
            file_code like CONCAT('%',#{keyword},'%') or
            file_name like CONCAT('%',#{keyword},'%')
            )

        </if>
        <if test="status != null">
            AND status = #{status}
        </if>
        ORDER BY id DESC
    </select>
</mapper>
